{% extends 'base.html' %}
{% block content %}
    <div class="user-greeting">
        <h1>Hello {{ current_user.username }}</h1>
        <span style="padding-top: 8px;"><img src="{{ current_user.avatar(32) }}" alt="User avatar for {{ current_user.username }}"></span>
    </div>
    {% if form %}
        <div class="new-post">
            <form action="" method="post">
                {{ form.hidden_tag() }}
                <p>
                    {{ form.post.label }}<br>
                    {{ form.post(cols=32, rows=4) }}<br>
                    {% for error in form.post.errors  %}
                        <span style="color: red">{{ error }}</span>
                    {% endfor %}
                </p>
                <p>{{ form.submit() }}</p>
            </form>
        </div>        
    {% endif %}
    <div class="posts-section">
        {% for post in posts %}
            {% include 'macros/_post.html' %}
        {% endfor %}
    </div>
{% endblock content %}
